// Golden test: Nullable T? methods — is_some, is_none, unwrap, unwrap_or, expect
// Tests nullable method support in bootstrap compiler
// Nullable semantics: null = 0, non-null = any non-zero value
// Also tests T? type annotation parsing (v0.90.102)
// Expected output: 193

fn main() -> i64 = {
    // Test 1: is_some on non-null value with type annotation
    let x: i64? = 42;
    let r1 = if x.is_some() { 10 } else { 0 };  // 10

    // Test 2: is_none on non-null value
    let r2 = if x.is_none() { 0 } else { 20 };  // 20

    // Test 3: unwrap on non-null value (identity)
    let r3 = x.unwrap();  // 42

    // Test 4: unwrap_or with non-null — returns receiver
    let r4 = x.unwrap_or(99);  // 42

    // Test 5: is_some on null with type annotation
    let y: i64? = null;
    let r5 = if y.is_some() { 0 } else { 30 };  // 30

    // Test 6: is_none on null value
    let r6 = if y.is_none() { 15 } else { 0 };  // 15

    // Test 7: unwrap_or with null — returns default
    let r7 = y.unwrap_or(34);  // 34

    // Total: 10 + 20 + 42 + 42 + 30 + 15 + 34 = 193
    println(r1 + r2 + r3 + r4 + r5 + r6 + r7);
    0
};
